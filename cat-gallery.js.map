{"version":3,"file":"cat-gallery.js","sources":["../src/js/cat-gallery.js"],"sourcesContent":["import { getFavourites, deleteFavourite } from './api';\nimport { notifications } from '../utils/notifications';\nimport { createGalleryMarkUp } from './render-functions';\n\n\nconst gallery = document.querySelector('.fav-gallery');\nconst loader = document.querySelector('.loader');\nconst themeSwitch = document.querySelector(\".slider\");\n\nthemeSwitch.addEventListener('click', () => {\n  document.querySelector('body').classList.toggle('dark-mode');\n})\n\nloader.classList.remove('is-hidden');\n\nrenderFavourites();\n\ngallery?.addEventListener('click', handleDeleteFav)\n\nasync function renderFavourites() {\n  try {\n    const { data } = await getFavourites();\n    gallery.innerHTML = createGalleryMarkUp(data);\n  } catch (e) {\n    notifications.error(e);\n  } finally {\n    loader.classList.add('is-hidden');\n  }\n}\n\nasync function handleDeleteFav(e) {\n  if (!e.target.classList.contains('icon')) {\n    return;\n  }\n\n  const { imageId } = e.target.dataset;\n  deleteFavourite(imageId);\n\n  const imageToDelete = e.target.closest('.item');\n  imageToDelete.remove();\n  notifications.removedFromFavorites();\n}"],"names":["gallery","loader","themeSwitch","renderFavourites","handleDeleteFav","data","getFavourites","createGalleryMarkUp","notifications","imageId","deleteFavourite"],"mappings":"gHAKA,MAAMA,EAAU,SAAS,cAAc,cAAc,EAC/CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,SAAS,EAEpDA,EAAY,iBAAiB,QAAS,IAAM,CAC1C,SAAS,cAAc,MAAM,EAAE,UAAU,OAAO,WAAW,CAC7D,CAAC,EAEDD,EAAO,UAAU,OAAO,WAAW,EAEnCE,IAEAH,GAAA,MAAAA,EAAS,iBAAiB,QAASI,GAEnC,eAAeD,GAAmB,CAChC,GAAI,CACF,KAAM,CAAE,KAAAE,CAAI,EAAK,MAAMC,IACvBN,EAAQ,UAAYO,EAAoBF,CAAI,CAC7C,OAAQ,EAAG,CACVG,EAAc,MAAM,CAAC,CACzB,QAAY,CACRP,EAAO,UAAU,IAAI,WAAW,CACjC,CACH,CAEA,eAAeG,EAAgB,EAAG,CAChC,GAAI,CAAC,EAAE,OAAO,UAAU,SAAS,MAAM,EACrC,OAGF,KAAM,CAAE,QAAAK,CAAS,EAAG,EAAE,OAAO,QAC7BC,EAAgBD,CAAO,EAED,EAAE,OAAO,QAAQ,OAAO,EAChC,OAAM,EACpBD,EAAc,qBAAoB,CACpC"}