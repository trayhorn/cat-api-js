{"version":3,"file":"cat-gallery.js","sources":["../src/js/cat-gallery.js"],"sourcesContent":["import { getFavourites, deleteFavourite } from './api';\nimport { notifications } from '../utils/notifications';\n\n\nconst gallery = document.querySelector('.fav-gallery');\nconst loader = document.querySelector('.loader');\nconst themeSwitch = document.querySelector(\".slider\");\n\nthemeSwitch.addEventListener('click', (e) => {\n  document.querySelector('body').classList.toggle('dark-mode');\n})\n\nloader.classList.remove('is-hidden');\n\nrenderFavourites();\n\nasync function renderFavourites() {\n  try {\n    const { data } = await getFavourites();\n\n    gallery.innerHTML = createMarkUp(data);\n    gallery.addEventListener('click', handleDeleteFav);\n\n  } catch (e) {\n    notifications.error(e);\n  } finally {\n    loader.classList.add('is-hidden');\n  }\n}\n\nfunction createMarkUp(imagesArray) {\n  return imagesArray\n    .map(({ id, image: { url } }) => {\n      return `<li class=\"item\">\n              <img\n                class=\"image\"\n                src=\"${url}\" alt=\"\"\n              >\n              <button class=\"icon-container\">\n                <img\n                  class=\"icon\"\n                  data-image-id=\"${id}\"\n                  src=\"./img/cancel-circle.svg\" alt=\"\"\n                >\n              </button>\n          </li>`;\n    })\n    .join(\"\");\n}\n\nasync function handleDeleteFav(e) {\n  if (!e.target.classList.contains('icon')) {\n    return;\n  }\n\n  const image_id = e.target.dataset.imageId;\n  deleteFavourite(image_id);\n\n  const imageToDelete = e.target.closest('.item');\n  imageToDelete.remove();\n  notifications.removedFromFavorites();\n}"],"names":["gallery","loader","themeSwitch","renderFavourites","data","getFavourites","createMarkUp","handleDeleteFav","notifications","imagesArray","id","url","image_id","deleteFavourite"],"mappings":"yGAIA,MAAMA,EAAU,SAAS,cAAc,cAAc,EAC/CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,SAAS,EAEpDA,EAAY,iBAAiB,QAAU,GAAM,CAC3C,SAAS,cAAc,MAAM,EAAE,UAAU,OAAO,WAAW,CAC7D,CAAC,EAEDD,EAAO,UAAU,OAAO,WAAW,EAEnCE,IAEA,eAAeA,GAAmB,CAChC,GAAI,CACF,KAAM,CAAE,KAAAC,CAAI,EAAK,MAAMC,IAEvBL,EAAQ,UAAYM,EAAaF,CAAI,EACrCJ,EAAQ,iBAAiB,QAASO,CAAe,CAElD,OAAQ,EAAG,CACVC,EAAc,MAAM,CAAC,CACzB,QAAY,CACRP,EAAO,UAAU,IAAI,WAAW,CACjC,CACH,CAEA,SAASK,EAAaG,EAAa,CACjC,OAAOA,EACJ,IAAI,CAAC,CAAE,GAAAC,EAAI,MAAO,CAAE,IAAAC,CAAK,CAAA,IACjB;AAAA;AAAA;AAAA,uBAGUA,CAAG;AAAA;AAAA;AAAA;AAAA;AAAA,mCAKSD,CAAE;AAAA;AAAA;AAAA;AAAA,gBAKhC,EACA,KAAK,EAAE,CACZ,CAEA,eAAeH,EAAgB,EAAG,CAChC,GAAI,CAAC,EAAE,OAAO,UAAU,SAAS,MAAM,EACrC,OAGF,MAAMK,EAAW,EAAE,OAAO,QAAQ,QAClCC,EAAgBD,CAAQ,EAEF,EAAE,OAAO,QAAQ,OAAO,EAChC,OAAM,EACpBJ,EAAc,qBAAoB,CACpC"}