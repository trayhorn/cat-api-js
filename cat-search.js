import{f,n as o,a as u,b as I,r as g,c as m,g as S,d as h,s as v}from"./assets/notifications-0RVw7jKw.js";import{S as y}from"./assets/vendor-S7NC7oBj.js";const d=document.querySelector(".breed-form .select"),n=document.querySelector(".search-gallery"),i=document.querySelector(".cat-info"),c=document.querySelector(".loader");c.classList.remove("is-hidden");F();L();d.addEventListener("change",T);async function L(){try{const{data:e}=await f();p(e)}catch(e){o.error(e)}finally{c.classList.add("is-hidden"),d.classList.remove("is-hidden")}}function p(e){const a=e.map(({id:t,name:r})=>`<option class="select-option" value="${t}">${r}</option>`).join("");d.insertAdjacentHTML("beforeend",a),new y({select:".breed-form .select"})}async function T(e){i.innerHTML="",n.innerHTML="",c.classList.remove("is-hidden");const a=e.target.value;try{const[t,r]=await Promise.all([u(a),I(a)]),{data:[s]}=t;localStorage.setItem("catInfo",JSON.stringify(s)),i.innerHTML=g(s);const{data:l}=r;localStorage.setItem("catImages",JSON.stringify(l)),n.innerHTML=m(l),n.addEventListener("click",b)}catch{o.error(e)}finally{c.classList.add("is-hidden")}}async function b(e){if(!e.target.classList.contains("icon"))return;const{imageId:a}=e.target.dataset;e.target.setAttribute("src","./img/heart-broken.svg");try{const t=await S();if(t.data.find(r=>r.image_id===a)){const r=t.data.find(s=>s.image_id===a);e.target.setAttribute("src","./img/heart.svg"),await h(r.id),o.removedFromFavorites();return}await v(a),o.addedToFavorites()}catch(t){console.log(t)}}function F(){!localStorage.getItem("catInfo")||!localStorage.getItem("catImages")||(i.innerHTML=g(JSON.parse(localStorage.getItem("catInfo"))),n.innerHTML=m(JSON.parse(localStorage.getItem("catImages"))))}
//# sourceMappingURL=cat-search.js.map
